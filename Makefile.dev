# Docker

build:
	docker compose build
up:
	docker compose up -d
down:
	docker compose down
logs:
	docker compose logs -f
devdb:
	docker compose up flix_db -d


# Django
test:
	python -m pytest -vvv
	coverage html
run_dev:
	python manage.py runserver

# Poetry
export_plugin:
	poetry self add poetry-plugin-export
poetry-install:
	pip install poetry
poetry-requirements:
	poetry add $(cat requirements.txt)
poetry-dev-requirements:
	poetry add --group-dev $(cat requirements_dev.txt)
requirements:
	poetry export \
	--format=requirements.txt \
	--without-hashes \
	--without group_dev \
	--output=requirements.txt

	sed -i 's/ *;.*//' requirements.txt
requirements_dev:
	poetry export \
	--format=requirements.txt \
	--without-hashes \
	--only group_dev \
	--output=requirements_dev.txt

	sed -i 's/ *;.*//' requirements_dev.txt

# Linter
lint:
	ruff check
fix:
	ruff check --fix
format:
	ruff format
coverage:
	coverage report
coverage-html:
	coverage html
